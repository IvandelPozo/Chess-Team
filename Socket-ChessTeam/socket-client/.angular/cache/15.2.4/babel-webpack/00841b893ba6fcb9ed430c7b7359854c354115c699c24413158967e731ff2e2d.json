{"ast":null,"code":"import { Taulell } from '../../Model/Entitats/Implementations/Taulell';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Serveis/Chess/chess.service\";\nimport * as i2 from \"@angular/common\";\nfunction JugarComponent_h1_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"Navegador de: \", ctx_r0.teamMember.nom, \" - \", ctx_r0.teamMember.colorPeces, \"\");\n  }\n}\nfunction JugarComponent_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function JugarComponent_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.assignMember());\n    });\n    i0.ɵɵtext(1, \"Jugar\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction JugarComponent_div_2_img_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 10);\n  }\n  if (rf & 2) {\n    const peca_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", peca_r15.imatge, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction JugarComponent_div_2_ng_container_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const lletra_r16 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(lletra_r16);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"background-color\": a0,\n    \"height\": \"55px\",\n    \"width\": \"55px\"\n  };\n};\nfunction JugarComponent_div_2_ng_container_16_td_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 12);\n    i0.ɵɵlistener(\"dragover\", function JugarComponent_div_2_ng_container_16_td_4_Template_td_dragover_0_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r22.onDragOver($event));\n    })(\"drop\", function JugarComponent_div_2_ng_container_16_td_4_Template_td_drop_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const y_r21 = restoredCtx.index;\n      const x_r18 = i0.ɵɵnextContext().index;\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r24.onDrop($event, x_r18, y_r21));\n    });\n    i0.ɵɵelementStart(1, \"img\", 13);\n    i0.ɵɵlistener(\"dragstart\", function JugarComponent_div_2_ng_container_16_td_4_Template_img_dragstart_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r23);\n      const y_r21 = restoredCtx.index;\n      const x_r18 = i0.ɵɵnextContext().index;\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r26.onDragStart($event, x_r18, y_r21));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const casella_r20 = ctx.$implicit;\n    const y_r21 = ctx.index;\n    const x_r18 = i0.ɵɵnextContext().index;\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, casella_r20.color === \"blanc\" ? \"#e9e9b2\" : \"#c58f47\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", casella_r20.peca == null ? null : casella_r20.peca.imatge, i0.ɵɵsanitizeUrl)(\"draggable\", ctx_r19.draggable(x_r18, y_r21, 0));\n  }\n}\nfunction JugarComponent_div_2_ng_container_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, JugarComponent_div_2_ng_container_16_td_4_Template, 2, 5, \"td\", 11);\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const fila_r17 = ctx.$implicit;\n    const x_r18 = ctx.index;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r7.taulells[0].numeros[x_r18]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", fila_r17);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r7.taulells[0].numeros[x_r18]);\n  }\n}\nfunction JugarComponent_div_2_ng_container_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const lletra_r29 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(lletra_r29);\n  }\n}\nfunction JugarComponent_div_2_img_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 10);\n  }\n  if (rf & 2) {\n    const peca_r30 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", peca_r30.imatge, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction JugarComponent_div_2_img_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 10);\n  }\n  if (rf & 2) {\n    const peca_r31 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", peca_r31.imatge, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction JugarComponent_div_2_ng_container_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const lletra_r32 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(lletra_r32);\n  }\n}\nfunction JugarComponent_div_2_ng_container_40_td_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 12);\n    i0.ɵɵlistener(\"dragover\", function JugarComponent_div_2_ng_container_40_td_4_Template_td_dragover_0_listener($event) {\n      i0.ɵɵrestoreView(_r39);\n      const ctx_r38 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r38.onDragOver($event));\n    })(\"drop\", function JugarComponent_div_2_ng_container_40_td_4_Template_td_drop_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r39);\n      const y_r37 = restoredCtx.index;\n      const x_r34 = i0.ɵɵnextContext().index;\n      const ctx_r40 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r40.onDrop($event, x_r34, y_r37));\n    });\n    i0.ɵɵelementStart(1, \"img\", 13);\n    i0.ɵɵlistener(\"dragstart\", function JugarComponent_div_2_ng_container_40_td_4_Template_img_dragstart_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r39);\n      const y_r37 = restoredCtx.index;\n      const x_r34 = i0.ɵɵnextContext().index;\n      const ctx_r42 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r42.onDragStart($event, x_r34, y_r37));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const casella_r36 = ctx.$implicit;\n    const y_r37 = ctx.index;\n    const x_r34 = i0.ɵɵnextContext().index;\n    const ctx_r35 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, casella_r36.color === \"blanc\" ? \"#e9e9b2\" : \"#c58f47\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", casella_r36.peca == null ? null : casella_r36.peca.imatge, i0.ɵɵsanitizeUrl)(\"draggable\", ctx_r35.draggable(x_r34, y_r37, 1));\n  }\n}\nfunction JugarComponent_div_2_ng_container_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, JugarComponent_div_2_ng_container_40_td_4_Template, 2, 5, \"td\", 11);\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const fila_r33 = ctx.$implicit;\n    const x_r34 = ctx.index;\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r12.taulells[1].numeros[x_r34]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", fila_r33);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r12.taulells[1].numeros[x_r34]);\n  }\n}\nfunction JugarComponent_div_2_ng_container_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const lletra_r45 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(lletra_r45);\n  }\n}\nfunction JugarComponent_div_2_img_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 10);\n  }\n  if (rf & 2) {\n    const peca_r46 = ctx.$implicit;\n    i0.ɵɵproperty(\"src\", peca_r46.imatge, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction JugarComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\")(2, \"h2\", 5);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h2\", 5);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 6);\n    i0.ɵɵtemplate(7, JugarComponent_div_2_img_7_Template, 1, 1, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h1\")(9, \"b\");\n    i0.ɵɵtext(10, \"Taulell 1\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"table\", 8)(12, \"tr\");\n    i0.ɵɵelement(13, \"td\");\n    i0.ɵɵtemplate(14, JugarComponent_div_2_ng_container_14_Template, 3, 1, \"ng-container\", 9);\n    i0.ɵɵelement(15, \"td\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, JugarComponent_div_2_ng_container_16_Template, 7, 3, \"ng-container\", 9);\n    i0.ɵɵelementStart(17, \"tr\");\n    i0.ɵɵelement(18, \"td\");\n    i0.ɵɵtemplate(19, JugarComponent_div_2_ng_container_19_Template, 3, 1, \"ng-container\", 9);\n    i0.ɵɵelement(20, \"td\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"div\", 6);\n    i0.ɵɵtemplate(22, JugarComponent_div_2_img_22_Template, 1, 1, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"h2\", 5);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"div\")(26, \"h2\", 5);\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"h2\", 5);\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"div\", 6);\n    i0.ɵɵtemplate(31, JugarComponent_div_2_img_31_Template, 1, 1, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"h1\")(33, \"b\");\n    i0.ɵɵtext(34, \"Taulell 2\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"table\", 8)(36, \"tr\");\n    i0.ɵɵelement(37, \"td\");\n    i0.ɵɵtemplate(38, JugarComponent_div_2_ng_container_38_Template, 3, 1, \"ng-container\", 9);\n    i0.ɵɵelement(39, \"td\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(40, JugarComponent_div_2_ng_container_40_Template, 7, 3, \"ng-container\", 9);\n    i0.ɵɵelementStart(41, \"tr\");\n    i0.ɵɵelement(42, \"td\");\n    i0.ɵɵtemplate(43, JugarComponent_div_2_ng_container_43_Template, 3, 1, \"ng-container\", 9);\n    i0.ɵɵelement(44, \"td\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(45, \"div\", 6);\n    i0.ɵɵtemplate(46, JugarComponent_div_2_img_46_Template, 1, 1, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"h2\", 5);\n    i0.ɵɵtext(48);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.lluitadorsTaulell1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.T1JN);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[0].pecesMortes[1]);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[0].lletres);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[0].caselles);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[0].lletres);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[0].pecesMortes[0]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.T1JB);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.lluitadorsTaulell2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.T2JB);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[1].pecesMortes[0]);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[1].lletres);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[1].caselles);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[1].lletres);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.taulells[1].pecesMortes[1]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.T2JN);\n  }\n}\nexport class JugarComponent {\n  constructor(socket) {\n    this.socket = socket;\n    // Taulells\n    this.taulell1 = new Taulell();\n    this.taulell2 = Taulell.rotate();\n    this.taulells = Array();\n    this.taulells.push(this.taulell1);\n    this.taulells.push(this.taulell2);\n  }\n  // Funció per a assignar un jugador a un taulell\n  assignMember() {\n    this.socket.assignTeamMember();\n  }\n  ngOnInit() {\n    this.socket.getTeamMember().subscribe(data => {\n      this.teamMember = data.jugadorActual;\n      this.indexElMeuTaulell = data.indexElMeuTaulell;\n      this.indexPecesMatades = data.indexPecesMatades;\n      this.laMevaSala = data.sala;\n    });\n    let start = this.socket.startGame().subscribe(lluitadors => {\n      if (lluitadors.sala == this.laMevaSala) {\n        this.lluitadorsTaulell1 = lluitadors.lluitadors1.equip;\n        this.lluitadorsTaulell2 = lluitadors.lluitadors2.equip;\n        this.T1JB = lluitadors.lluitadors1.jugadors[0];\n        this.T1JN = lluitadors.lluitadors1.jugadors[1];\n        this.T2JB = lluitadors.lluitadors2.jugadors[0];\n        this.T2JN = lluitadors.lluitadors2.jugadors[1];\n        // Deixar d'escoltar startGame\n        start.unsubscribe();\n      }\n    });\n    this.socket.rebreMoviment().subscribe(moviment => {\n      this.arribaMoviment(moviment);\n    });\n  }\n  arribaMoviment(moviment) {\n    if (moviment.sala == this.laMevaSala) {\n      let indexTaulell = moviment.indexTauell;\n      let indexPecesMatades = moviment.indexPecesMatades;\n      let posicioInicial = moviment.posicioInicial;\n      let posicioFinal = moviment.posicioFinal;\n      let casellaInicial = this.taulells[indexTaulell].caselles[posicioInicial.x][posicioInicial.y];\n      let casellaFinal = this.taulells[indexTaulell].caselles[posicioFinal.x][posicioFinal.y];\n      if (casellaFinal.peca != null) {\n        this.taulells[indexTaulell].pecesMortes[indexPecesMatades].push(casellaFinal.peca);\n      }\n      this.taulells[indexTaulell].caselles[posicioFinal.x][posicioFinal.y].peca = casellaInicial.peca;\n      this.taulells[indexTaulell].caselles[posicioInicial.x][posicioInicial.y].peca = null;\n      this.taulells[indexTaulell].torn = (this.taulells[indexTaulell].torn + 1) % 2;\n    }\n  }\n  draggable(x, y, indexTaulell) {\n    if (indexTaulell == this.indexElMeuTaulell) {\n      let elMeuTorn = this.teamMember.colorPeces == \"blanc\" ? 0 : 1;\n      if (this.taulells[indexTaulell].torn == elMeuTorn) {\n        if (this.taulells[indexTaulell].caselles[x][y].peca != null) {\n          if (this.taulells[indexTaulell].caselles[x][y].peca?.color == this.teamMember.colorPeces) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  onDragStart(event, x, y) {\n    //enviar casella al event dataTransfer\n    event.dataTransfer?.setData('casellaInicial', JSON.stringify({\n      x: x,\n      y: y\n    }));\n  }\n  onDragOver(event) {\n    event.preventDefault();\n  }\n  onDrop(event, x, y) {\n    event.preventDefault();\n    const coordsInicials = JSON.parse(event.dataTransfer.getData('casellaInicial'));\n    const coordsFinals = {\n      x: x,\n      y: y\n    };\n    let moviment;\n    moviment = {\n      indexTauell: this.indexElMeuTaulell,\n      indexPecesMatades: this.indexPecesMatades,\n      posicioInicial: coordsInicials,\n      posicioFinal: coordsFinals,\n      sala: this.laMevaSala\n    };\n    let peca = this.taulells[this.indexElMeuTaulell].caselles[coordsFinals.x][coordsFinals.y].peca;\n    if (peca != null && peca.color != this.teamMember.colorPeces || peca == null) {\n      this.socket.movimentPeca(moviment);\n    }\n  }\n}\nJugarComponent.ɵfac = function JugarComponent_Factory(t) {\n  return new (t || JugarComponent)(i0.ɵɵdirectiveInject(i1.ChessService));\n};\nJugarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: JugarComponent,\n  selectors: [[\"app-jugar\"]],\n  decls: 3,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [3, \"click\", 4, \"ngIf\"], [\"class\", \"jugar\", 4, \"ngIf\"], [3, \"click\"], [1, \"jugar\"], [1, \"esquerre\"], [1, \"matades\"], [3, \"src\", 4, \"ngFor\", \"ngForOf\"], [1, \"taula\"], [4, \"ngFor\", \"ngForOf\"], [3, \"src\"], [3, \"ngStyle\", \"dragover\", \"drop\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngStyle\", \"dragover\", \"drop\"], [3, \"src\", \"draggable\", \"dragstart\"]],\n  template: function JugarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, JugarComponent_h1_0_Template, 2, 2, \"h1\", 0);\n      i0.ɵɵtemplate(1, JugarComponent_button_1_Template, 2, 0, \"button\", 1);\n      i0.ɵɵtemplate(2, JugarComponent_div_2_Template, 49, 16, \"div\", 2);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.teamMember);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.teamMember);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.lluitadorsTaulell1);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i2.NgStyle],\n  styles: [\".taula[_ngcontent-%COMP%] {\\r\\n    border-collapse: collapse;\\r\\n    table-layout: fixed;\\r\\n    width: 560px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.jugar[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.matades[_ngcontent-%COMP%] {\\r\\n    border: 2px solid;\\r\\n    width: 58vh;\\r\\n    height: 12vh;\\r\\n}\\r\\n\\r\\n.esquerre[_ngcontent-%COMP%] {\\r\\n    text-align: left;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvUHJvamVjdGUvQ29tcG9uZW50cy9qdWdhci9qdWdhci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0kseUJBQXlCO0lBQ3pCLG1CQUFtQjtJQUNuQixZQUFZO0lBQ1osa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0ksa0JBQWtCO0lBQ2xCLGFBQWE7QUFDakI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIsV0FBVztJQUNYLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxnQkFBZ0I7QUFDcEIiLCJzb3VyY2VzQ29udGVudCI6WyIudGF1bGEge1xyXG4gICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICAgIHRhYmxlLWxheW91dDogZml4ZWQ7XHJcbiAgICB3aWR0aDogNTYwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5qdWdhciB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG59XHJcblxyXG4ubWF0YWRlcyB7XHJcbiAgICBib3JkZXI6IDJweCBzb2xpZDtcclxuICAgIHdpZHRoOiA1OHZoO1xyXG4gICAgaGVpZ2h0OiAxMnZoO1xyXG59XHJcblxyXG4uZXNxdWVycmUge1xyXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcclxufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"AAKA,SAASA,OAAO,QAAQ,8CAA8C;;;;;;ICLtEC,0BAAuB;IAAAA,YAAgE;IAAAA,iBAAK;;;;IAArEA,eAAgE;IAAhEA,uGAAgE;;;;;;IACvFA,iCAAqD;IAAzBA;MAAAA;MAAA;MAAA,OAASA,oCAAc;IAAA,EAAC;IAACA,qBAAK;IAAAA,iBAAS;;;;;IAQvDA,0BAAyE;;;;IAApBA,uDAAmB;;;;;IAOpEA,6BAAyD;IACrDA,0BAAI;IAAAA,YAAU;IAAAA,iBAAK;IACvBA,0BAAe;;;;IADPA,eAAU;IAAVA,gCAAU;;;;;;;;;;;;;IAOdA,8BAKkC;IAD9BA;MAAAA;MAAA;MAAA,OAAYA,yCAAkB;IAAA,EAAC;MAAA;MAAA;MAAA;MAAA;MAAA,OACvBA,mDAAoB;IAAA,EADG;IAG/BA,+BAC2E;IAAvEA;MAAA;MAAA;MAAA;MAAA;MAAA,OAAaA,wDAAyB;IAAA,EAAC;IAD3CA,iBAC2E;;;;;;;IAP3EA,2GAEwB;IAInBA,eAA4B;IAA5BA,iGAA4B;;;;;IAV7CA,6BAAuE;IACnEA,0BAAI;IACIA,YAA0B;IAAAA,iBAAK;IACnCA,oFASK;IACLA,0BAAI;IAAAA,YAA0B;IAAAA,iBAAK;IAE3CA,0BAAe;;;;;;IAbHA,eAA0B;IAA1BA,uDAA0B;IACNA,eAAS;IAATA,kCAAS;IAU7BA,eAA0B;IAA1BA,uDAA0B;;;;;IAKlCA,6BAAyD;IACrDA,0BAAI;IAAAA,YAAU;IAAAA,iBAAK;IACvBA,0BAAe;;;;IADPA,eAAU;IAAVA,gCAAU;;;;;IAMtBA,0BAAyE;;;;IAApBA,uDAAmB;;;;;IAQxEA,0BAAyE;;;;IAApBA,uDAAmB;;;;;IAMpEA,6BAAyD;IACrDA,0BAAI;IAAAA,YAAU;IAAAA,iBAAK;IACvBA,0BAAe;;;;IADPA,eAAU;IAAVA,gCAAU;;;;;;IAOdA,8BAK8B;IAD9BA;MAAAA;MAAA;MAAA,OAAYA,yCAAkB;IAAA,EAAC;MAAA;MAAA;MAAA;MAAA;MAAA,OACvBA,mDAAoB;IAAA,EADG;IAG/BA,+BAC2E;IAAvEA;MAAA;MAAA;MAAA;MAAA;MAAA,OAAaA,wDAAyB;IAAA,EAAC;IAD3CA,iBAC2E;;;;;;;IAP3EA,2GAEwB;IAInBA,eAA4B;IAA5BA,iGAA4B;;;;;IAVzCA,6BAAuE;IACnEA,0BAAI;IACIA,YAA0B;IAAAA,iBAAK;IACnCA,oFASK;IACLA,0BAAI;IAAAA,YAA0B;IAAAA,iBAAK;IAE3CA,0BAAe;;;;;;IAbHA,eAA0B;IAA1BA,wDAA0B;IACNA,eAAS;IAATA,kCAAS;IAU7BA,eAA0B;IAA1BA,wDAA0B;;;;;IAKlCA,6BAAyD;IACrDA,0BAAI;IAAAA,YAAU;IAAAA,iBAAK;IACvBA,0BAAe;;;;IADPA,eAAU;IAAVA,gCAAU;;;;;IAMtBA,0BAAyE;;;;IAApBA,uDAAmB;;;;;IAvFpFA,8BAA8C;IAEjBA,YAAsB;IAAAA,iBAAK;IAChDA,6BAAqB;IAAAA,YAAQ;IAAAA,iBAAK;IAElCA,8BAAqB;IACjBA,qEAAyE;IAC7EA,iBAAM;IAENA,0BAAI;IAAGA,0BAAS;IAAAA,iBAAI;IACpBA,iCAAqB;IAEbA,sBAAS;IACTA,yFAEe;IACfA,sBAAS;IACbA,iBAAK;IACLA,yFAee;IACfA,2BAAI;IACAA,sBAAS;IACTA,yFAEe;IACfA,sBAAS;IACbA,iBAAK;IAETA,+BAAqB;IACjBA,uEAAyE;IAC7EA,iBAAM;IACNA,8BAAqB;IAAAA,aAAQ;IAAAA,iBAAK;IAEtCA,4BAAK;IACoBA,aAAsB;IAAAA,iBAAK;IAChDA,8BAAqB;IAAAA,aAAQ;IAAAA,iBAAK;IAClCA,+BAAqB;IACjBA,uEAAyE;IAC7EA,iBAAM;IACNA,2BAAI;IAAGA,0BAAS;IAAAA,iBAAI;IACpBA,iCAAqB;IAEbA,sBAAS;IACTA,yFAEe;IACfA,sBAAS;IACbA,iBAAK;IACLA,yFAee;IACfA,2BAAI;IACAA,sBAAS;IACTA,yFAEe;IACfA,sBAAS;IACbA,iBAAK;IAETA,+BAAqB;IACjBA,uEAAyE;IAC7EA,iBAAM;IACNA,8BAAqB;IAAAA,aAAQ;IAAAA,iBAAK;;;;IAvFbA,eAAsB;IAAtBA,+CAAsB;IACtBA,eAAQ;IAARA,iCAAQ;IAGHA,eAA6B;IAA7BA,2DAA6B;IAOdA,eAAsB;IAAtBA,oDAAsB;IAK5BA,eAAyB;IAAzBA,qDAAyB;IAkBnBA,eAAsB;IAAtBA,oDAAsB;IAOrCA,eAA6B;IAA7BA,2DAA6B;IAElCA,eAAQ;IAARA,iCAAQ;IAGRA,eAAsB;IAAtBA,+CAAsB;IACtBA,eAAQ;IAARA,iCAAQ;IAEHA,eAA6B;IAA7BA,2DAA6B;IAMdA,eAAsB;IAAtBA,oDAAsB;IAK5BA,eAAyB;IAAzBA,qDAAyB;IAkBnBA,eAAsB;IAAtBA,oDAAsB;IAOrCA,eAA6B;IAA7BA,2DAA6B;IAElCA,eAAQ;IAARA,iCAAQ;;;AD9ErC,OAAM,MAAOC,cAAc;EA4BzBC,YAAoBC,MAAoB;IAApB,WAAM,GAANA,MAAM;IAZ1B;IACA,aAAQ,GAAY,IAAIJ,OAAO,EAAE;IACjC,aAAQ,GAAYA,OAAO,CAACK,MAAM,EAAE;IACpC,aAAQ,GAAmBC,KAAK,EAAW;IAUzC,IAAI,CAACC,QAAQ,CAACC,IAAI,CAAC,IAAI,CAACC,QAAQ,CAAC;IACjC,IAAI,CAACF,QAAQ,CAACC,IAAI,CAAC,IAAI,CAACE,QAAQ,CAAC;EACnC;EAEA;EACAC,YAAYA;IACV,IAAI,CAACP,MAAM,CAACQ,gBAAgB,EAAE;EAChC;EAEAC,QAAQA;IACN,IAAI,CAACT,MAAM,CAACU,aAAa,EAAE,CAACC,SAAS,CAAEC,IAAiB,IAAI;MAC1D,IAAI,CAACC,UAAU,GAAGD,IAAI,CAACE,aAAa;MACpC,IAAI,CAACC,iBAAiB,GAAGH,IAAI,CAACG,iBAAiB;MAC/C,IAAI,CAACC,iBAAiB,GAAGJ,IAAI,CAACI,iBAAiB;MAC/C,IAAI,CAACC,UAAU,GAAGL,IAAI,CAACM,IAAI;IAC7B,CAAC,CAAC;IAEF,IAAIC,KAAK,GAAG,IAAI,CAACnB,MAAM,CAACoB,SAAS,EAAE,CAACT,SAAS,CAAEU,UAAe,IAAI;MAEhE,IAAIA,UAAU,CAACH,IAAI,IAAI,IAAI,CAACD,UAAU,EAAE;QAEtC,IAAI,CAACK,kBAAkB,GAAGD,UAAU,CAACE,WAAW,CAACC,KAAK;QACtD,IAAI,CAACC,kBAAkB,GAAGJ,UAAU,CAACK,WAAW,CAACF,KAAK;QAEtD,IAAI,CAACG,IAAI,GAAGN,UAAU,CAACE,WAAW,CAACK,QAAQ,CAAC,CAAC,CAAC;QAC9C,IAAI,CAACC,IAAI,GAAGR,UAAU,CAACE,WAAW,CAACK,QAAQ,CAAC,CAAC,CAAC;QAC9C,IAAI,CAACE,IAAI,GAAGT,UAAU,CAACK,WAAW,CAACE,QAAQ,CAAC,CAAC,CAAC;QAC9C,IAAI,CAACG,IAAI,GAAGV,UAAU,CAACK,WAAW,CAACE,QAAQ,CAAC,CAAC,CAAC;QAE9C;QACAT,KAAK,CAACa,WAAW,EAAE;;IAEvB,CAAC,CAAC;IAEF,IAAI,CAAChC,MAAM,CAACiC,aAAa,EAAE,CAACtB,SAAS,CAAEuB,QAAkB,IAAI;MAC3D,IAAI,CAACC,cAAc,CAACD,QAAQ,CAAC;IAC/B,CAAC,CAAC;EACJ;EAEAC,cAAcA,CAACD,QAAkB;IAE/B,IAAIA,QAAQ,CAAChB,IAAI,IAAI,IAAI,CAACD,UAAU,EAAE;MAEpC,IAAImB,YAAY,GAAGF,QAAQ,CAACG,WAAW;MACvC,IAAIrB,iBAAiB,GAAGkB,QAAQ,CAAClB,iBAAiB;MAElD,IAAIsB,cAAc,GAAGJ,QAAQ,CAACI,cAAc;MAC5C,IAAIC,YAAY,GAAGL,QAAQ,CAACK,YAAY;MAExC,IAAIC,cAAc,GAAG,IAAI,CAACrC,QAAQ,CAACiC,YAAY,CAAC,CAACK,QAAQ,CAACH,cAAc,CAACI,CAAC,CAAC,CAACJ,cAAc,CAACK,CAAC,CAAC;MAC7F,IAAIC,YAAY,GAAG,IAAI,CAACzC,QAAQ,CAACiC,YAAY,CAAC,CAACK,QAAQ,CAACF,YAAY,CAACG,CAAC,CAAC,CAACH,YAAY,CAACI,CAAC,CAAC;MAEvF,IAAIC,YAAY,CAACC,IAAI,IAAI,IAAI,EAAE;QAC7B,IAAI,CAAC1C,QAAQ,CAACiC,YAAY,CAAC,CAACU,WAAW,CAAC9B,iBAAiB,CAAC,CAACZ,IAAI,CAACwC,YAAY,CAACC,IAAI,CAAC;;MAEpF,IAAI,CAAC1C,QAAQ,CAACiC,YAAY,CAAC,CAACK,QAAQ,CAACF,YAAY,CAACG,CAAC,CAAC,CAACH,YAAY,CAACI,CAAC,CAAC,CAACE,IAAI,GAAGL,cAAc,CAACK,IAAI;MAC/F,IAAI,CAAC1C,QAAQ,CAACiC,YAAY,CAAC,CAACK,QAAQ,CAACH,cAAc,CAACI,CAAC,CAAC,CAACJ,cAAc,CAACK,CAAC,CAAC,CAACE,IAAI,GAAG,IAAI;MAEpF,IAAI,CAAC1C,QAAQ,CAACiC,YAAY,CAAC,CAACW,IAAI,GAAG,CAAC,IAAI,CAAC5C,QAAQ,CAACiC,YAAY,CAAC,CAACW,IAAI,GAAG,CAAC,IAAI,CAAC;;EAEjF;EAEAC,SAASA,CAACN,CAAS,EAAEC,CAAS,EAAEP,YAAoB;IAClD,IAAIA,YAAY,IAAI,IAAI,CAACrB,iBAAiB,EAAE;MAC1C,IAAIkC,SAAS,GAAG,IAAI,CAACpC,UAAU,CAACqC,UAAU,IAAI,OAAO,GAAG,CAAC,GAAG,CAAC;MAC7D,IAAI,IAAI,CAAC/C,QAAQ,CAACiC,YAAY,CAAC,CAACW,IAAI,IAAIE,SAAS,EAAE;QACjD,IAAI,IAAI,CAAC9C,QAAQ,CAACiC,YAAY,CAAC,CAACK,QAAQ,CAACC,CAAC,CAAC,CAACC,CAAC,CAAC,CAACE,IAAI,IAAI,IAAI,EAAE;UAC3D,IAAI,IAAI,CAAC1C,QAAQ,CAACiC,YAAY,CAAC,CAACK,QAAQ,CAACC,CAAC,CAAC,CAACC,CAAC,CAAC,CAACE,IAAI,EAAEM,KAAK,IAAI,IAAI,CAACtC,UAAU,CAACqC,UAAU,EAAE;YACxF,OAAO,IAAI;;;;;IAKnB,OAAO,KAAK;EACd;EAEAE,WAAWA,CAACC,KAAgB,EAAEX,CAAS,EAAEC,CAAS;IAChD;IACAU,KAAK,CAACC,YAAY,EAAEC,OAAO,CAAC,gBAAgB,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEf,CAAC,EAAEA,CAAC;MAAEC,CAAC,EAAEA;IAAC,CAAE,CAAC,CAAC;EAC/E;EAEAe,UAAUA,CAACL,KAAgB;IACzBA,KAAK,CAACM,cAAc,EAAE;EACxB;EAEAC,MAAMA,CAACP,KAAgB,EAAEX,CAAS,EAAEC,CAAS;IAC3CU,KAAK,CAACM,cAAc,EAAE;IACtB,MAAME,cAAc,GAAgBL,IAAI,CAACM,KAAK,CAACT,KAAK,CAACC,YAAa,CAACS,OAAO,CAAC,gBAAgB,CAAC,CAAC;IAC7F,MAAMC,YAAY,GAAgB;MAAEtB,CAAC,EAAEA,CAAC;MAAEC,CAAC,EAAEA;IAAC,CAAE;IAEhD,IAAIT,QAAkB;IACtBA,QAAQ,GAAG;MACTG,WAAW,EAAE,IAAI,CAACtB,iBAAiB;MACnCC,iBAAiB,EAAE,IAAI,CAACA,iBAAiB;MACzCsB,cAAc,EAAEuB,cAAc;MAC9BtB,YAAY,EAAEyB,YAAY;MAC1B9C,IAAI,EAAE,IAAI,CAACD;KACZ;IAED,IAAI4B,IAAI,GAAG,IAAI,CAAC1C,QAAQ,CAAC,IAAI,CAACY,iBAAiB,CAAC,CAAC0B,QAAQ,CAACuB,YAAY,CAACtB,CAAC,CAAC,CAACsB,YAAY,CAACrB,CAAC,CAAC,CAACE,IAAI;IAE9F,IAAIA,IAAI,IAAI,IAAI,IAAIA,IAAI,CAACM,KAAK,IAAI,IAAI,CAACtC,UAAU,CAACqC,UAAU,IAAIL,IAAI,IAAI,IAAI,EAAE;MAC5E,IAAI,CAAC7C,MAAM,CAACiE,YAAY,CAAC/B,QAAQ,CAAC;;EAEtC;;AArIWpC,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAoE;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCd3BzE,6DAA4F;MAC5FA,qEAAmE;MAEnEA,iEA2FM;;;MA9FDA,qCAAgB;MACZA,eAAiB;MAAjBA,sCAAiB;MAEpBA,eAAwB;MAAxBA,6CAAwB","names":["Taulell","i0","JugarComponent","constructor","socket","rotate","Array","taulells","push","taulell1","taulell2","assignMember","assignTeamMember","ngOnInit","getTeamMember","subscribe","data","teamMember","jugadorActual","indexElMeuTaulell","indexPecesMatades","laMevaSala","sala","start","startGame","lluitadors","lluitadorsTaulell1","lluitadors1","equip","lluitadorsTaulell2","lluitadors2","T1JB","jugadors","T1JN","T2JB","T2JN","unsubscribe","rebreMoviment","moviment","arribaMoviment","indexTaulell","indexTauell","posicioInicial","posicioFinal","casellaInicial","caselles","x","y","casellaFinal","peca","pecesMortes","torn","draggable","elMeuTorn","colorPeces","color","onDragStart","event","dataTransfer","setData","JSON","stringify","onDragOver","preventDefault","onDrop","coordsInicials","parse","getData","coordsFinals","movimentPeca","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\juaca\\OneDrive\\Escriptori\\2DAW\\ANGULAR\\Socket-ChessTeam\\socket-client\\src\\app\\Projecte\\Components\\jugar\\jugar.component.ts","C:\\Users\\juaca\\OneDrive\\Escriptori\\2DAW\\ANGULAR\\Socket-ChessTeam\\socket-client\\src\\app\\Projecte\\Components\\jugar\\jugar.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Coordenades } from '../../Model/Entitats/Implementations/Coordenades';\nimport { InfoJugador } from '../../Model/Entitats/Implementations/InfoJugador';\nimport { Jugador } from '../../Model/Entitats/Implementations/Jugador';\nimport { Moviment } from '../../Model/Entitats/Implementations/Moviment';\nimport { Taulell } from '../../Model/Entitats/Implementations/Taulell';\nimport { ChessService } from '../../Serveis/Chess/chess.service';\n\n@Component({\n  selector: 'app-jugar',\n  templateUrl: './jugar.component.html',\n  styleUrls: ['./jugar.component.css']\n})\n\nexport class JugarComponent implements OnInit {\n\n  // Variables per a la gestió dels jugadors\n  teamMember!: Jugador;\n  lluitadorsTaulell1!: string;\n  lluitadorsTaulell2!: string;\n\n  // Taulell 1 Jugador Blanc\n  T1JB!: string;\n  // Taulell 1 Jugador Negre\n  T1JN!: string;\n  // Taulell 2 Jugador Blanc\n  T2JB!: string;\n  // Taulell 2 Jugador Negre\n  T2JN!: string;\n\n  // Taulells\n  taulell1: Taulell = new Taulell();\n  taulell2: Taulell = Taulell.rotate();\n  taulells: Array<Taulell> = Array<Taulell>();\n\n  // Variables per a la gestió dels moviments\n  indexElMeuTaulell!: number;\n  indexPecesMatades!: number;\n\n  // Sales del taulell sense duplicació per el control d'usuaris entrats\n  laMevaSala!: string;\n\n  constructor(private socket: ChessService) {\n    this.taulells.push(this.taulell1);\n    this.taulells.push(this.taulell2);\n  }\n\n  // Funció per a assignar un jugador a un taulell\n  assignMember(): void {\n    this.socket.assignTeamMember();\n  }\n\n  ngOnInit(): void {\n    this.socket.getTeamMember().subscribe((data: InfoJugador) => {\n      this.teamMember = data.jugadorActual;\n      this.indexElMeuTaulell = data.indexElMeuTaulell;\n      this.indexPecesMatades = data.indexPecesMatades;\n      this.laMevaSala = data.sala;\n    });\n\n    let start = this.socket.startGame().subscribe((lluitadors: any) => {\n\n      if (lluitadors.sala == this.laMevaSala) {\n\n        this.lluitadorsTaulell1 = lluitadors.lluitadors1.equip;\n        this.lluitadorsTaulell2 = lluitadors.lluitadors2.equip;\n\n        this.T1JB = lluitadors.lluitadors1.jugadors[0];\n        this.T1JN = lluitadors.lluitadors1.jugadors[1];\n        this.T2JB = lluitadors.lluitadors2.jugadors[0];\n        this.T2JN = lluitadors.lluitadors2.jugadors[1];\n\n        // Deixar d'escoltar startGame\n        start.unsubscribe();\n      }\n    });\n\n    this.socket.rebreMoviment().subscribe((moviment: Moviment) => {\n      this.arribaMoviment(moviment);\n    });\n  }\n\n  arribaMoviment(moviment: Moviment): void {\n\n    if (moviment.sala == this.laMevaSala) {\n\n      let indexTaulell = moviment.indexTauell;\n      let indexPecesMatades = moviment.indexPecesMatades;\n\n      let posicioInicial = moviment.posicioInicial;\n      let posicioFinal = moviment.posicioFinal;\n\n      let casellaInicial = this.taulells[indexTaulell].caselles[posicioInicial.x][posicioInicial.y];\n      let casellaFinal = this.taulells[indexTaulell].caselles[posicioFinal.x][posicioFinal.y];\n\n      if (casellaFinal.peca != null) {\n        this.taulells[indexTaulell].pecesMortes[indexPecesMatades].push(casellaFinal.peca);\n      }\n      this.taulells[indexTaulell].caselles[posicioFinal.x][posicioFinal.y].peca = casellaInicial.peca;\n      this.taulells[indexTaulell].caselles[posicioInicial.x][posicioInicial.y].peca = null;\n\n      this.taulells[indexTaulell].torn = (this.taulells[indexTaulell].torn + 1) % 2;\n    }\n  }\n\n  draggable(x: number, y: number, indexTaulell: number): boolean {\n    if (indexTaulell == this.indexElMeuTaulell) {\n      let elMeuTorn = this.teamMember.colorPeces == \"blanc\" ? 0 : 1;\n      if (this.taulells[indexTaulell].torn == elMeuTorn) {\n        if (this.taulells[indexTaulell].caselles[x][y].peca != null) {\n          if (this.taulells[indexTaulell].caselles[x][y].peca?.color == this.teamMember.colorPeces) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  onDragStart(event: DragEvent, x: number, y: number): void {\n    //enviar casella al event dataTransfer\n    event.dataTransfer?.setData('casellaInicial', JSON.stringify({ x: x, y: y }));\n  }\n\n  onDragOver(event: DragEvent): void {\n    event.preventDefault();\n  }\n\n  onDrop(event: DragEvent, x: number, y: number): void {\n    event.preventDefault();\n    const coordsInicials: Coordenades = JSON.parse(event.dataTransfer!.getData('casellaInicial'));\n    const coordsFinals: Coordenades = { x: x, y: y };\n\n    let moviment: Moviment;\n    moviment = {\n      indexTauell: this.indexElMeuTaulell,\n      indexPecesMatades: this.indexPecesMatades,\n      posicioInicial: coordsInicials,\n      posicioFinal: coordsFinals,\n      sala: this.laMevaSala\n    }\n\n    let peca = this.taulells[this.indexElMeuTaulell].caselles[coordsFinals.x][coordsFinals.y].peca;\n\n    if (peca != null && peca.color != this.teamMember.colorPeces || peca == null) {\n      this.socket.movimentPeca(moviment);\n    }\n  }\n}","<h1 *ngIf=\"teamMember\">Navegador de: {{ teamMember.nom }} - {{ teamMember.colorPeces }}</h1>\n<button *ngIf=\"!teamMember\" (click)=\"assignMember()\">Jugar</button>\n\n<div *ngIf=\"lluitadorsTaulell1\" class=\"jugar\">\n    <div>\n        <h2 class=\"esquerre\">{{lluitadorsTaulell1}}</h2>\n        <h2 class=\"esquerre\">{{T1JN}}</h2>\n\n        <div class=\"matades\">\n            <img *ngFor=\"let peca of taulells[0].pecesMortes[1]\" [src]=\"peca.imatge\">\n        </div>\n        \n        <h1><b>Taulell 1</b></h1>\n        <table class=\"taula\">\n            <tr>\n                <td></td>\n                <ng-container *ngFor=\"let lletra of taulells[0].lletres\">\n                    <td>{{lletra}}</td>\n                </ng-container>\n                <td></td>\n            </tr>\n            <ng-container *ngFor=\"let fila of taulells[0].caselles; let x = index\">\n                <tr>\n                    <td>{{taulells[0].numeros[x]}}</td>\n                    <td *ngFor=\"let casella of fila; let y = index\"\n                        [ngStyle]=\"{'background-color': casella.color ===\n                        'blanc' ? '#e9e9b2' : '#c58f47', 'height':\n                        '55px','width': '55px'}\"\n                        (dragover)=\"onDragOver($event)\"\n                        (drop)=\"onDrop($event, x, y)\">\n\n                        <img [src]=\"casella.peca?.imatge\"\n                            (dragstart)=\"onDragStart($event, x, y)\" [draggable]=\"draggable(x,y,0)\">\n                    </td>\n                    <td>{{taulells[0].numeros[x]}}</td>\n                </tr>\n            </ng-container>\n            <tr>\n                <td></td>\n                <ng-container *ngFor=\"let lletra of taulells[0].lletres\">\n                    <td>{{lletra}}</td>\n                </ng-container>\n                <td></td>\n            </tr>\n        </table>\n        <div class=\"matades\">\n            <img *ngFor=\"let peca of taulells[0].pecesMortes[0]\" [src]=\"peca.imatge\">\n        </div>\n        <h2 class=\"esquerre\">{{T1JB}}</h2>\n    </div>\n    <div>\n        <h2 class=\"esquerre\">{{lluitadorsTaulell2}}</h2>\n        <h2 class=\"esquerre\">{{T2JB}}</h2>\n        <div class=\"matades\">\n            <img *ngFor=\"let peca of taulells[1].pecesMortes[0]\" [src]=\"peca.imatge\">\n        </div>\n        <h1><b>Taulell 2</b></h1>\n        <table class=\"taula\">\n            <tr>\n                <td></td>\n                <ng-container *ngFor=\"let lletra of taulells[1].lletres\">\n                    <td>{{lletra}}</td>\n                </ng-container>\n                <td></td>\n            </tr>\n            <ng-container *ngFor=\"let fila of taulells[1].caselles; let x = index\">\n                <tr>\n                    <td>{{taulells[1].numeros[x]}}</td>\n                    <td *ngFor=\"let casella of fila; let y = index\"\n                    [ngStyle]=\"{'background-color': casella.color ===\n                    'blanc' ? '#e9e9b2' : '#c58f47', 'height':\n                    '55px','width': '55px'}\"\n                    (dragover)=\"onDragOver($event)\"\n                    (drop)=\"onDrop($event, x, y)\">\n\n                    <img [src]=\"casella.peca?.imatge\"\n                        (dragstart)=\"onDragStart($event, x, y)\" [draggable]=\"draggable(x,y,1)\">\n                    </td>\n                    <td>{{taulells[1].numeros[x]}}</td>\n                </tr>\n            </ng-container>\n            <tr>\n                <td></td>\n                <ng-container *ngFor=\"let lletra of taulells[1].lletres\">\n                    <td>{{lletra}}</td>\n                </ng-container>\n                <td></td>\n            </tr>\n        </table>\n        <div class=\"matades\">\n            <img *ngFor=\"let peca of taulells[1].pecesMortes[1]\" [src]=\"peca.imatge\">\n        </div>\n        <h2 class=\"esquerre\">{{T2JN}}</h2>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}